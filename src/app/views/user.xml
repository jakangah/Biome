<?xml version="1.0" encoding="UTF-8"?>
<biome:views xmlns:biome="http://github.com/mermetbt/Biome/">

	<biome:include src="elements/navbar.xml"/>

	<biome:view action="profile">
		<h3>Profile</h3>
		<div class="row">
			<div class="col-lg-8">
				<biome:panel title="User informations">
					<biome:form>
						<biome:field value="#{auth.user.firstname}"/>
						<biome:field value="#{auth.user.lastname}"/>
						<biome:field value="#{auth.user.mail}"/>
						<biome:button class="btn-success" value="Save" action="#{user.save}"/>
					</biome:form>
				</biome:panel>
				<biome:panel title="Password change">
					<biome:form>
						<biome:field type="password" value="#{auth.password}" label="Password" required="true"/>
						<biome:field type="password" value="#{auth.password_confirm}" label="Password Confirm" required="true"/>
						<biome:button class="btn-success" value="Change" action="#{user.update_password}"/>
					</biome:form>
				</biome:panel>
			</div>
			<div class="col-lg-4">
				<biome:panel title="Informations">

				</biome:panel>
			</div>
		</div>
	</biome:view>

	<biome:view action="index">
		<h3>Users</h3>
		<div class="row">
			<div class="col-lg-8">
				<biome:panel>
					<biome:a class="btn btn-success" controller="user" action="create"><span>New</span></biome:a>
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>User ID</th>
								<th>Firstname</th>
								<th>Lastname</th>
								<th>Mail</th>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<biome:loop value="#{users.users}" var="u">
							<tr>
								<td><biome:variable value="#{u.user_id}"/></td>
								<td><biome:variable value="#{u.firstname}"/></td>
								<td><biome:variable value="#{u.lastname}"/></td>
								<td><biome:variable value="#{u.mail}"/></td>
								<td><biome:a class="btn btn-sm btn-default" controller="user" action="edit" item="#{u.user_id}"><span>Edit</span></biome:a></td>
								<td><biome:a class="btn btn-sm btn-danger" controller="user" action="delete" item="#{u.user_id}"><span>Delete</span></biome:a></td>
							</tr>
						</biome:loop>
					</table>
				</biome:panel>
			</div>
			<div class="col-lg-4">
				<biome:panel title="Informations">

				</biome:panel>
			</div>
		</div>
	</biome:view>

	<biome:view action="edit">
		<h3>User</h3>
		<div class="row">
			<div class="col-lg-8">
				<biome:panel title="User informations">
					<biome:form>
						<biome:field value="#{users.user.firstname}"/>
						<biome:field value="#{users.user.lastname}"/>
						<biome:field value="#{users.user.mail}"/>

						<biome:field type="password" value="#{users.password}" label="Password" required="true"/>
						<biome:field type="password" value="#{users.password_confirm}" label="Password Confirm" required="true"/>

						<biome:button class="btn-success" value="Update" action="#{user.edit}"/>
					</biome:form>
				</biome:panel>
			</div>
			<div class="col-lg-4">
				<biome:panel title="Informations">
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>Role Name</th>
								<th></th>
							</tr>
						</thead>
						<biome:loop value="#{users.user.roles}" var="r">
							<tr>
								<td><biome:variable value="#{r.role_name}"/></td>
								<td><biome:a class="btn btn-sm btn-danger" controller="role" action="delete" item="#{r.role_id}"><span>Delete</span></biome:a></td>
							</tr>
						</biome:loop>
					</table>
				</biome:panel>
			</div>
		</div>
	</biome:view>

	<biome:view action="create">
		<h3>Add new user</h3>
		<biome:panel title="User informations">
			<biome:form>
				<biome:field value="#{user.firstname}"/>
				<biome:field value="#{user.lastname}"/>
				<biome:field value="#{user.mail}"/>
				<biome:field value="#{user.password}"/>
				<biome:button class="btn-success" value="Create" action="#{user.create}"/>
			</biome:form>
		</biome:panel>
	</biome:view>

</biome:views>
