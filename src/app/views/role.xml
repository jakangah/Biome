<?xml version="1.0" encoding="UTF-8"?>
<biome:views xmlns:biome="http://github.com/mermetbt/Biome/">

	<biome:include src="elements/navbar.xml"/>

	<biome:view action="index">
		<biome:title title="Roles"/>
		<div class="row">
			<div class="col-lg-12">
				<biome:panel>
					<biome:a class="btn btn-success" controller="role" action="create"><i class="fa fa-plus"></i><span> New</span></biome:a>

					<br/><br/>
					<biome:datatable value="#{roles.roles}" var="r">
						<biome:column headerTitle="#">
							<biome:variable value="#{r.role_id}"/>
						</biome:column>

						<biome:column headerTitle="Role">
							<biome:variable value="#{r.role_name}"/>
						</biome:column>

						<biome:column>
							<biome:a class="btn btn-sm btn-default" controller="role" action="edit" item="#{r.role_id}"><i class="fa fa-pencil"></i><span> Edit</span></biome:a>
							<span style="padding: 5px;"></span>
							<biome:a class="btn btn-sm btn-danger" controller="role" action="delete" item="#{r.role_id}"><i class="fa fa-trash"></i><span> Delete</span></biome:a>
						</biome:column>
					</biome:datatable>
				</biome:panel>
			</div>
		</div>
	</biome:view>

	<biome:view action="edit">
		<biome:title title="Roles"/>
		<div class="row">
			<div class="col-lg-8">
				<biome:panel title="Role informations">
					<biome:form>
						<biome:field value="#{roles.role.role_name}"/>
						<biome:button class="btn-success" value="Update" action="#{role.edit}"/>
					</biome:form>
				</biome:panel>
			</div>
			<div class="col-lg-4">
				<biome:panel title="Users">

					<!--
					<biome:a class="btn btn-success" controller="role" action="add" item="#{roles.role.role_id}"><i class="fa fa-plus"></i><span> Add</span></biome:a>
					-->

					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>Firstname</th>
								<th>Lastname</th>
								<th></th>
							</tr>
						</thead>
						<biome:loop value="#{roles.role.users}" var="u">
							<tr>
								<td><biome:variable value="#{u.firstname}"/></td>
								<td><biome:variable value="#{u.lastname}"/></td>
								<td><biome:a class="btn btn-sm btn-danger" controller="role" action="remove" item="#{roles.role.role_id}" page="#{u.user_id}"><i class="fa fa-minus"></i><span> Remove</span></biome:a></td>
							</tr>
						</biome:loop>
					</table>
				</biome:panel>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-12">
				<biome:panel title="Authorizations">

					<biome:form>
						<biome:rolemanagement value="#{roles.role.role_rights}"/>

						<biome:button class="btn-success" value="Update" action="#{role.authorizations}"/>
					</biome:form>

				</biome:panel>
			</div>
		</div>
	</biome:view>

	<biome:view action="create">
		<biome:title title="Add new roles"/>
		<biome:panel title="Role informations">
			<biome:form>
				<biome:field value="#{role.role_name}"/>
				<biome:button class="btn-success" value="Create" action="#{role.create}"/>
			</biome:form>
		</biome:panel>
	</biome:view>

	<biome:view action="add">
		<biome:title title="Affect role to users"/>

		<biome:panel title="List">
			<h4><biome:variable value="#{role.role_name}"/></h4>

			<biome:form>
				<ul>
				<biome:loop value="#{users.users}" var="u">
					<li>
						<input type="checkbox" name="user[]" value="#{u.user_id}"/>
						<span style="padding: 5px"></span>
						<biome:variable value="#{u.firstname}"/>
						<span style="padding: 3px"></span>
						<biome:variable value="#{u.lastname}"/>
					</li>
				</biome:loop>
				</ul>
				<biome:button class="btn-success" value="Add" action="#{role.add}"/>
			</biome:form>
		</biome:panel>
	</biome:view>

</biome:views>
